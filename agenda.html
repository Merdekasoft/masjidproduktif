<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agenda Kegiatan Masjid</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    .glass {
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: linear-gradient(135deg, #d1fae5 20%, #fef3c7 80%);
      z-index: -1;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-up {
      animation: fadeInUp 0.4s ease-out both;
    }
  </style>
</head>
<body class="font-sans text-[13px] min-h-screen flex flex-col text-gray-800">

  <header class="bg-white/60 text-emerald-900 py-3 shadow-lg backdrop-blur-md border-b border-white/30">
    <div class="text-center">
      <h1 class="text-xl font-semibold tracking-tight drop-shadow animate-fade-in-up"><i class="fas fa-calendar-week mr-2"></i>Agenda Kegiatan Masjid</h1>
      <p class="text-xs italic text-emerald-700">"Catatan kegiatan untuk menyemangati amal"</p>
    </div>
  </header>

  <main class="flex-grow flex items-start justify-center p-3">
    <div class="glass max-w-4xl w-full p-3 rounded-xl shadow-lg animate-fade-in-up border border-white/30 space-y-3" id="agenda-container">
      <p class="text-gray-700 text-center"><i class="fas fa-spinner fa-spin mr-2"></i>Memuat agenda kegiatan...</p>
    </div>
  </main>

  <footer class="text-center text-emerald-900 text-xs py-3 bg-white/60 border-t border-white/30 backdrop-blur-md">
    &copy; 2025 <i class="fas fa-mosque"></i> Masjid Produktif â€¢ Jadwal & Kegiatan Harian
  </footer>

  <script>
    const tsvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTuDb3C_2GcjKKJot8hR6gFRfdLPIPqjJy6Dxsu1Efs8BhmBpTrBTGlTjfzaSYCQ9Vqx2N1UTlaQfqX/pub?output=tsv";

    fetch(tsvUrl)
      .then(response => response.text())
      .then(data => {
        const lines = data.trim().split('\n');
        const rows = lines.slice(1);
        const container = document.getElementById('agenda-container');
        container.innerHTML = '';

        if (rows.length === 0) {
          container.innerHTML = '<p class="text-gray-500 text-center">Belum ada agenda tersedia.</p>';
          return;
        }

        rows.forEach(row => {
          const [judul, pemateri, tanggal, jam, deskripsi] = row.split('\t');

          const card = document.createElement('div');
          card.className = "bg-white/70 backdrop-blur-md border border-emerald-200 p-3 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 animate-fade-in-up";

          card.innerHTML = `
            <div class="grid grid-cols-12 gap-2 text-[13px] items-start">
              <div class="col-span-4 flex flex-col">
                <div class="font-semibold text-emerald-800 flex items-center">
                  <i class="fas fa-bullhorn mr-2 text-emerald-600"></i>${judul}
                </div>
                <p class="text-gray-700 leading-relaxed text-xs">${deskripsi}</p>
              </div>
              <div class="col-span-2 text-gray-700">${tanggal}</div>
              <div class="col-span-2 text-gray-700">${jam} WIB</div>
              <div class="col-span-4 text-gray-700">${pemateri}</div>
            </div>
          `;

          container.appendChild(card);
        });
      })
      .catch(err => {
        document.getElementById('agenda-container').innerHTML = `<p class="text-red-500 text-center">Gagal memuat data agenda.</p>`;
        console.error("TSV Load Error:", err);
      });
  </script>
</body>
</html>
